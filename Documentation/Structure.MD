# üìê Structure d√©taill√©e du projet

## Vue d'ensemble

L'application Shiny a √©t√© restructur√©e pour une meilleure organisation et maintenabilit√©. Voici la structure compl√®te avec le r√¥le de chaque fichier.

## üéØ Fichiers principaux

### global.R
**R√¥le** : Configuration globale de l'application
- Chargement de toutes les biblioth√®ques n√©cessaires
- Chargement des donn√©es depuis le dossier `data/`
- Pr√©paration des listes de filtres pour FINESS et Professionnels
- Calcul des min/max pour les sliders

**Sections** :
1. Chargement des biblioth√®ques
2. D√©termination du chemin de base
3. Chargement des donn√©es (FINESS, Professionnels, GeoJSON)
4. Pr√©paration des filtres

### ui.R
**R√¥le** : Point d'entr√©e de l'interface utilisateur
- D√©finit la structure du dashboard (header, sidebar, body)
- Importe tous les modules UI depuis le dossier `ui/`
- Charge le fichier CSS personnalis√©

**Contient** :
- Header avec titre
- Sidebar avec navigation et filtres dynamiques
- Body qui source tous les modules UI

### server.R
**R√¥le** : Point d'entr√©e de la logique serveur
- Importe tous les modules serveur depuis le dossier `server/`
- Orchestre toutes les fonctionnalit√©s de l'application

**Contient** :
- Sources de tous les modules serveur

---

## üìÇ Dossier ui/

### ui_accueil.R
**Page** : Accueil
**Contient** :
- Message de bienvenue
- 2 cartes de pr√©sentation (FINESS et Professionnels)
- Section "√Ä propos" avec les sources

### ui_finess_overview.R
**Page** : Vue d'ensemble FINESS
**Contient** :
- 4 KPIs (nombre d'√©tablissements, cat√©gories, d√©partements, MAJ)
- Graphique des top cat√©gories/d√©partements
- Carte d'aper√ßu g√©ographique

### ui_finess_carte.R
**Page** : Carte interactive FINESS
**Contient** :
- 3 info boxes (points sur carte, pr√©cision GPS, filtres actifs)
- Carte interactive avec clustering
- Options d'affichage (clustering, l√©gende)

### ui_finess_analyses.R
**Page** : Analyses FINESS
**Contient** :
- S√©lecteur de type d'analyse (4 types)
- √âvolution temporelle avec slider
- R√©partition g√©ographique
- Distribution par cat√©gorie
- Statistiques descriptives

### ui_finess_donnees.R
**Page** : Base de donn√©es FINESS
**Contient** :
- Options d'affichage (colonnes, pagination)
- Bouton de t√©l√©chargement CSV
- Tableau interactif DataTables

### ui_pro_overview.R
**Page** : Vue d'ensemble Professionnels
**Contient** :
- 4 KPIs (effectif, densit√©, professions, part 60+)
- Graphique top professions
- Carte d'aper√ßu de densit√©

### ui_pro_carte.R
**Page** : Carte de densit√©
**Contient** :
- 3 info boxes (densit√© min, max, moyenne)
- Carte choropl√®the par d√©partement
- Options d'affichage (l√©gende, √©tiquettes)

### ui_pro_analyses.R
**Page** : Analyses Professionnels
**Contient** :
- S√©lecteur de type d'analyse (3 types)
- √âvolution temporelle
- Analyses d√©mographiques (√¢ges, part 60+)
- Statistiques descriptives

### ui_pro_donnees.R
**Page** : Base de donn√©es Professionnels
**Contient** :
- S√©lection du dataset (4 datasets)
- Options d'affichage
- Bouton de t√©l√©chargement
- Tableau interactif

### ui_apropos.R
**Page** : √Ä propos du projet
**Contient** :
- Informations sur les 3 auteurs
- Sources de donn√©es avec liens
- Lien GitHub du projet
- Limites et consid√©rations
- Technologies utilis√©es
- Licence et contexte universitaire

---

## üñ•Ô∏è Dossier server/

### server_navigation.R
**R√¥le** : Gestion de la navigation
**Contient** :
- Navigation vers section FINESS (bouton `goto_finess`)
- Navigation vers section Professionnels (bouton `goto_pro`)

### server_donnees_filtrees.R
**R√¥le** : Application des filtres
**Contient** :
- `donnees_finess_filtrees()` : Reactive pour filtrer les donn√©es FINESS
  - Filtre par d√©partement, cat√©gorie, ann√©e, coordonn√©es GPS
- `donnees_pro_filtrees()` : Reactive pour filtrer les donn√©es Professionnels
  - Filtre par ann√©e, profession, r√©gion, d√©partement, classe d'√¢ge

### server_reset.R
**R√¥le** : R√©initialisation des filtres
**Contient** :
- Reset des filtres FINESS
- Reset des filtres Professionnels
- Notifications de confirmation

### server_maj_departements.R
**R√¥le** : Mise √† jour dynamique
**Contient** :
- Mise √† jour de la liste des d√©partements selon la r√©gion s√©lectionn√©e

### server_finess.R
**R√¥le** : Logique compl√®te FINESS
**Sections** :
1. **KPIs** (4 outputs) :
   - Nombre d'√©tablissements
   - Nombre de cat√©gories
   - Nombre de d√©partements
   - Derni√®re mise √† jour

2. **Graphiques Overview** (3 outputs) :
   - Top cat√©gories
   - R√©partition d√©partements
   - Carte d'aper√ßu

3. **Carte Interactive** (4 outputs) :
   - 3 info boxes (points, pr√©cision, filtres)
   - Carte principale avec clustering/popups

4. **Graphiques d'Analyse** (6 outputs) :
   - √âvolution temporelle
   - Densit√© par d√©partement
   - Distribution cat√©gories (pie chart)
   - √âvolution par cat√©gorie
   - Statistiques descriptives
   - Qualit√© des donn√©es

5. **Tableau de donn√©es** (1 output) :
   - Tableau interactif avec filtres

6. **T√©l√©chargement** (1 handler) :
   - Export CSV

### server_professionnels.R
**R√¥le** : Logique compl√®te Professionnels
**Sections** :
1. **KPIs** (4 outputs) :
   - Effectif total
   - Densit√© moyenne
   - Nombre de professions
   - Part des 60 ans et plus

2. **Graphiques Overview** (2 outputs) :
   - Top professions
   - Carte d'aper√ßu de densit√©

3. **Carte de Densit√©** (4 outputs) :
   - 3 info boxes (densit√© min, max, moy)
   - Carte choropl√®the principale

4. **Graphiques d'Analyse** (5 outputs) :
   - √âvolution temporelle
   - Distribution par √¢ge (pie chart)
   - Part des 60 ans et plus
   - Statistiques descriptives
   - Qualit√© des donn√©es

5. **Tableau de donn√©es** (1 output) :
   - Tableau multi-datasets

6. **T√©l√©chargement** (1 handler) :
   - Export CSV multi-datasets

---

## üé® Dossier www/

### custom.css
**R√¥le** : Tous les styles personnalis√©s
**Sections** :
1. Configuration globale (fonts, reset)
2. Layout et conteneurs (wrapper, content, tabs)
3. Header et Sidebar
4. Boxes et Cards (small-box, info-box, box)
5. Typographie (h1, h2, h3, p)
6. Formulaires (boutons, inputs, selects)
7. Tableaux (DataTables)
8. Graphiques et cartes (Plotly, Leaflet)
9. Pages sp√©cifiques (accueil, √† propos)
10. Utilitaires (animations, notifications)

---

## üìä Dossier data/

Ce dossier doit contenir :
- `finess_geolocalise.csv` (√©tablissements FINESS)
- `demographie-effectifs-et-les-densites.rds` (effectifs professionnels)
- `demographie-ages-moyens-part-des-femmes-part-des-plus-de-60-ans.json` (√¢ges)
- `patientele.json` (patient√®le)
- `demographie-secteurs-conventionnels.json` (secteurs)

---

## üìù Fichiers de documentation

### README.md
Guide complet d'utilisation et d'installation

### STRUCTURE.md
Ce fichier - documentation d√©taill√©e de la structure

### .gitignore
Fichiers √† exclure du versioning Git

---

## üîÑ Flux de donn√©es

```
global.R
   ‚Üì
Chargement des donn√©es
   ‚Üì
Pr√©paration des filtres
   ‚Üì
   ‚îú‚îÄ‚îÄ ui.R ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ui/*.R (modules UI)
   ‚îÇ                      ‚Üì
   ‚îÇ                  Interface visible
   ‚îÇ                      ‚Üì
   ‚îî‚îÄ‚îÄ server.R ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí server/*.R (modules serveur)
                          ‚Üì
                   Logique + Outputs
                          ‚Üì
                    R√©sultats affich√©s
```

---

## üéØ Points cl√©s

### Avantages de cette structure

1. **Modularit√©** : Chaque fichier a une responsabilit√© claire
2. **Maintenabilit√©** : Facile de trouver et modifier du code
3. **Scalabilit√©** : Ajout de nouvelles fonctionnalit√©s simplifi√©
4. **Collaboration** : Plusieurs d√©veloppeurs peuvent travailler en parall√®le
5. **Lisibilit√©** : Nomenclature coh√©rente et commentaires hi√©rarchiques

### Conventions de nommage

- **Fichiers UI** : `ui_nom_section.R`
- **Fichiers Server** : `server_nom_fonctionnalite.R`
- **Sections de code** : Num√©rotation hi√©rarchique (1., 1.1., 1.1.1.)
- **Commentaires** : `# ---`, `## ---`, `### ---`

### Organisation des commentaires

```R
# ----------- 1. Section principale -----------

## ----- 1.1. Sous-section -----

### --- 1.1.1. D√©tail sp√©cifique ---
```

---

## üìà Statistiques du projet

- **Fichiers R** : 22 fichiers
- **Lignes de code** : ~3500 lignes (r√©parties sur tous les fichiers)
- **Modules UI** : 10 fichiers
- **Modules Serveur** : 6 fichiers
- **Outputs** : ~50 outputs (graphiques, cartes, tableaux, KPIs)
- **Datasets** : 5 fichiers de donn√©es

---

## üöÄ Pour d√©marrer

1. Cloner le repository
2. Cr√©er le dossier `data/` et y placer les fichiers de donn√©es
3. Installer les packages (voir README.md)
4. Lancer `shiny::runApp()`
5. Enjoy! üéâ